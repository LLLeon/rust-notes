# Common Concepts

## 1. å˜é‡å’Œå¯å˜æ€§

Rust ä¸­çš„å˜é‡é»˜è®¤æ˜¯ä¸å¯å˜çš„ï¼ˆimmutableï¼‰ï¼Œç¼–è¯‘å™¨ä¼šä¿è¯å®ƒçš„å€¼ä¸ä¼šæ”¹å˜ï¼Œè¿™ä½¿å¾—ä»£ç æ›´å®¹æ˜“è¿½è¸ªã€‚å¿…è¦æ—¶å¯ä»¥æ‰‹åŠ¨ä½¿å…¶å¯å˜ã€‚

```rust
let mut x = 5;
```

å½“å˜é‡æ˜¯ä¸å¯å˜çš„æ—¶ï¼Œä¸€æ—¦ä¸€ä¸ªå€¼ç»‘å®šåˆ°åˆ°è¯¥å˜é‡ï¼Œå€¼å°±ä¸èƒ½æ›´æ”¹äº†ã€‚

ä¾‹ï¼š

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {}", x);

    x = 6;
    println!("The Value of x is: {}", x);
}
```

`cargo run` è¿è¡Œï¼ŒæŠ¥é”™ï¼š

```bash
error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:5:5
  |
2 |     let x = 5;
  |         -
  |         |
  |         first assignment to `x`
  |         help: make this binding mutable: `mut x`
...
5 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable

error: aborting due to previous error
```

è¿™é™¤äº†é˜²æ­¢ bug å¤–ï¼Œè¿˜æœ‰å…¶å®ƒçš„æƒè¡¡ï¼š

- å½“ä½¿ç”¨å¤§ç»“æ„ä½“æ—¶ï¼ŒåŸåœ°ä¿®æ”¹æ•°æ®è¦æ¯”å¤åˆ¶å¹¶è¿”å›æ–°å®ä¾‹è¦å¿«ã€‚
- ä½¿ç”¨å°ç»“æ„ä½“æ—¶ï¼Œåˆ›å»ºæ–°çš„å®ä¾‹å’Œå‡½æ•°å¼çš„å†™æ³•ä½¿ä»£ç çš„å¯è¯»æ€§æ›´å¼ºã€‚
- è¿™éœ€è¦åœ¨æ€§èƒ½å’Œå¯è¯»æ€§ä¹‹é—´ä½œå‡ºæƒè¡¡ã€‚

### 1.1 å˜é‡å’Œå¸¸é‡çš„åŒºåˆ«

å¸¸é‡ä¹Ÿæ˜¯ç»‘å®šåˆ°åç§°ä¸”ä¸å…è®¸æ›´æ”¹çš„å€¼ï¼Œå®ƒå’Œå˜é‡çš„åŒºåˆ«ï¼š

- å¸¸é‡æ°¸è¿œæ˜¯ä¸å¯å˜çš„ï¼Œä¸èƒ½åƒå˜é‡ä¼¼åœ°ä½¿ç”¨ `mut` æ¥ä½¿å…¶æˆä¸ºå¯å˜çš„ã€‚
- å£°æ˜å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—ï¼Œè€Œä¸”**å¿…é¡»æ³¨æ˜å€¼çš„ç±»å‹**ã€‚
- å¸¸é‡å¯ä»¥åœ¨ä»»æ„ä½œç”¨åŸŸä¸­å£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸã€‚
- æœ€åï¼Œå¸¸é‡åªèƒ½è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœæˆ–å…¶å®ƒåªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼ã€‚

ç¤ºä¾‹ï¼š

```rust
const MAX_POINTS: u32 = 100_000;
```

- Rust å¸¸é‡çš„å‘½åè§„èŒƒæ˜¯ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”çš„å¤§å†™å­—æ¯å•è¯ã€‚
- å¯ä»¥åœ¨æ•°å­—å­—é¢å€¼ä¸­æ’å…¥ä¸‹åˆ’çº¿æ¥æå‡å¯è¯»æ€§ã€‚

### 1.2 é®è”½ (shadowing)

å¯ä»¥å£°æ˜ä¸€ä¸ªä¸å‰é¢å˜é‡åŒåçš„æ–°å˜é‡ï¼ŒRust ä¸­è¿™å«åšç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªå˜é‡é®è”½ (shadowing) äº†ã€‚å¯ä»¥ä½¿ç”¨ `let`å…³é”®å­—æ¥å¤šæ¬¡é®è”½ï¼š

```rust
fn main() {
    let x = 5;
    let x = x + 1; // 6
    let x = x * 5; // 30
    println!("The Value of x is: {}", x);
}
```

é®è”½å’Œå°†å˜é‡æ ‡è®°ä¸º `mut`ä¸åŒï¼Œåœ¨ä¸ä½¿ç”¨ `let`çš„æƒ…å†µä¸‹èµ‹å€¼ç»™è¿™ä¸ªå˜é‡å°†å¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚é€šè¿‡ä½¿ç”¨ `let` å¯ä»¥å¯¹ä¸€ä¸ªå€¼è¿›è¡Œä¸€äº›è½¬æ¢ï¼Œä¸è¿‡è½¬æ¢å®Œæˆåï¼Œå˜é‡ä»æ˜¯ä¸å¯å˜çš„ã€‚

é®è”½ä¸ mut çš„å…¶å®ƒä¸åŒï¼šå› ä¸ºå½“å†æ¬¡ä½¿ç”¨ let å…³é”®å­—æ—¶æ˜¯åˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œè¿™æ—¶å¯ä»¥æ”¹å˜å€¼çš„ç±»å‹ï¼Œä½†å¤ç”¨è¿™ä¸ªåç§°ã€‚

å¦‚ï¼Œå°†å­—ç¬¦ä¸²ç±»å‹æ”¹ä¸ºæ•°å­—ç±»å‹ï¼š

```rust
let spaces = "    ";
let spaces = spaces.len();
```

ä½†å¦‚æœä½¿ç”¨ mut çš„è¯ï¼Œç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼š

```rust
let mut spaces = "    ";
spaces = spaces.len();
```

æŠ¥é”™ï¼š

```bash
error[E0308]: mismatched types
 --> src/main.rs:3:14
  |
3 |     spaces = spaces.len();
  |              ^^^^^^^^^^^^ expected `&str`, found `usize`

error: aborting due to previous error
```

## 2. æ•°æ®ç±»å‹

Rust æ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œæ„å‘³ç€å¿…é¡»åœ¨ç¼–è¯‘æ—¶çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚ç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å˜é‡çš„å€¼å’Œä½¿ç”¨æ–¹å¼æ¥æ¨æ–­å…¶ç±»å‹ï¼Œä½†åœ¨å¯èƒ½æœ‰å¤šç§ç±»å‹çš„æƒ…å†µä¸‹ï¼Œéœ€è¦æ³¨æ˜å€¼çš„ç±»å‹ã€‚

æ¯”å¦‚æƒ³å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—æ—¶ï¼Œå¿…é¡»æ³¨æ˜å…¶ç±»å‹ï¼š

```rust
let guess: u32 = "42".parse().expect("Not a number.");
```

å¦‚æœæŠŠ u32 å»æ‰ï¼Œä¼šæŠ¥é”™ï¼š

```bash
error[E0282]: type annotations needed
 --> src/main.rs:2:9
  |
2 |     let guess = "42".parse().expect("Not a number.");
  |         ^^^^^ consider giving `guess` a type

error: aborting due to previous error
```

### 2.1 æ ‡é‡ (Scalar) ç±»å‹

**æ ‡é‡**ï¼ˆscalarï¼‰ç±»å‹ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚Rust æœ‰å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼šæ•´å‹ã€æµ®ç‚¹å‹ã€å¸ƒå°”ç±»å‹å’Œå­—ç¬¦ç±»å‹ã€‚

#### 2.1.1 æ•´æ•°ç±»å‹

ç›¸æ¯” Goï¼ŒRust å¤šäº†ä¸ª 128 ç±»å‹çš„æ•´æ•°ã€‚`isize` å’Œ `usize` ç±»å‹ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š64 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 64 ä½çš„ï¼Œ 32 ä½æ¶æ„ä¸Šå®ƒä»¬æ˜¯ 32 ä½çš„ã€‚

å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§å½¢å¼ç¼–å†™æ•´æ•°å­—é¢å€¼ã€‚é™¤ byte ä»¥å¤–çš„æ‰€æœ‰æ•´æ•°å­—é¢å€¼å…è®¸ä½¿ç”¨ç±»å‹åç¼€ï¼Œä¾‹å¦‚ `57u8`ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½¿ç”¨ `_` åšä¸ºåˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼Œä¾‹å¦‚`1_000`ã€‚

Rust çš„**æ•´æ•°ç±»å‹é»˜è®¤**æ˜¯ `i32`ï¼šå®ƒé€šå¸¸æœ€å¿«ï¼Œç”šè‡³åœ¨ 64 ä½ç³»ç»Ÿä¸Šä¹Ÿæ˜¯ã€‚`isize` æˆ– `usize` ä¸»è¦ä½œä¸ºæŸäº›é›†åˆçš„ç´¢å¼•

> æ•´æ•°æº¢å‡ºï¼š
>
> - å¦‚æœåœ¨ debug æ¨¡å¼ï¼Œæ•´æ•°æº¢å‡ºæ—¶ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚
> - å¦‚æœåœ¨ release æ¨¡å¼ï¼Œä¸ä¼šæŠ¥é”™ï¼Œç¼–è¯‘å™¨ä¼šæ‰§è¡Œ *twoâ€™s complement wrapping*ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ˜¯ u8 ç±»å‹ï¼Œ256 ä¼šå˜æˆ 0, 257 å˜æˆ 1ã€‚ã€‚ã€‚

#### 2.1.2 æµ®ç‚¹ç±»å‹

Rust çš„æµ®ç‚¹ç±»å‹æœ‰ `f32` å’Œ `f64`ï¼Œ**é»˜è®¤ç±»å‹**æ˜¯ `f64`ã€‚`f32` æ˜¯å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œ`f64` æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚

#### 2.1.3 æ•°å­—æ“ä½œ

åŠ å‡ä¹˜é™¤å’Œå–ä½™ï¼Œç›´æ¥çœ‹ä»£ç ï¼š

```rust
fn main() {
    // addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;

    // remainder
    let remainder = 43 % 5;
}
```

#### 2.1.4 å¸ƒå°”ç±»å‹ (Boolean)

å¸ƒå°”ç±»å‹å  1 å­—èŠ‚å¤§å°ã€‚

#### 2.1.5 å­—ç¬¦ç±»å‹ (Character)

Rust çš„ `char` ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ï¼Œç”±ä½¿ç”¨å•å¼•å·ï¼Œä¸åŒäºå­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·ã€‚

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
}
```

Rust çš„ `char` ç±»å‹çš„å¤§å°ä¸ºå››ä¸ªå­—èŠ‚ï¼Œå¹¶ä»£è¡¨äº†ä¸€ä¸ª Unicode æ ‡é‡å€¼ã€‚

### 2.2 å¤åˆç±»å‹

Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼šå…ƒç»„ï¼ˆtupleï¼‰å’Œæ•°ç»„ï¼ˆarrayï¼‰ã€‚

#### 2.2.1 å…ƒç»„ç±»å‹ (Tuple)

å…ƒç»„æ˜¯å°†**å¤šç§ç±»å‹çš„å¤šä¸ªå€¼**ç»„åˆä¸ºä¸€ä¸ªå¤åˆç±»å‹çš„ä¸€èˆ¬æ–¹æ³•ã€‚

- å…ƒç»„çš„é•¿åº¦å›ºå®šï¼Œä¸€æ—¦å£°æ˜ï¼Œå°±ä¸ä¼šå†æ‰©å®¹æˆ–ç¼©å®¹ã€‚
- å…ƒç»„ä¸­ä¸åŒå€¼çš„ç±»å‹ä¸æ˜¯å¿…é¡»ä¸€è‡´ã€‚

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

è¦ä»å…ƒç»„ä¸­è·å–å•ä¸ªå€¼ï¼Œä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„ (destructuring) å…ƒç»„çš„å€¼ï¼š

```rust
fn main() {
    let tup: (i32, f64, u8) = (24, 2.4, 42);
    let (x, y, z) = tup;

    println!("x: {}", x);
    println!("y: {}", y);
    println!("z: {}", z);
}
```

è¿˜å¯ä»¥ä½¿ç”¨ `.` åé¢åŠ å€¼çš„ç´¢å¼•æ¥ç›´æ¥è®¿é—®å…ƒç»„ä¸­çš„å€¼ï¼š

```rust
fn main() {
    let tup: (i32, f64, u8) = (24, 2.4, 42);

    let x = tup.0;
    let y = tup.1;
    let z = tup.2;

    println!("x: {}", x);
    println!("y: {}", y);
    println!("z: {}", z);
}
```

#### 2.2.2 æ•°ç»„ç±»å‹ (Array)

å’Œ Go ä¸€æ ·ï¼ŒRust æ•°ç»„ä¸­çš„å€¼çš„ç±»å‹ä¹Ÿå¿…é¡»ä¸€æ ·ã€‚å’Œå…ƒç»„ä¸€æ ·ï¼Œæ•°ç»„çš„é•¿åº¦ä¹Ÿæ˜¯å›ºå®šçš„ã€‚

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];
}
```

æ ‡å‡†åº“æä¾›äº†ä¸€ä¸ªä¸æ•°ç»„ç±»ä¼¼çš„ vector ç±»å‹ï¼Œä½† vector å¯ä»¥æ‰©å®¹å’Œç¼©å®¹ã€‚

å¯ä»¥æŒ‡å®šæ•°ç»„çš„ç±»å‹å’Œé•¿åº¦ï¼š

```rust
let a: [i32; 5] = [1, 2, 3, 4, 5];
```

è¿˜æœ‰åˆå§‹åŒ–æ•°ç»„çš„å¦ä¸€ç§è¯­æ³•ã€‚å¦‚æœæƒ³è®©æ•°ç»„ä¸­çš„å…ƒç´ å€¼éƒ½ä¸€æ ·ï¼Œå¯ä»¥æŒ‡å®šåˆå§‹å€¼å’Œæ•°ç»„é•¿åº¦ï¼š

```rust
// æ³¨æ„ï¼Œæ–¹æ‹¬å·é‡Œé¢æ˜¯åˆ†å·
let a: [3; 5];

// ç­‰åŒäºè¿™æ ·å†™ï¼Œä½†æ›´ç®€æ´
let a = [3, 3, 3, 3, 3];
```

è®¿é—®æ•°ç»„å…ƒç´ ï¼šæ•°ç»„æ˜¯åœ¨æ ˆä¸Šåˆ†é…çš„å•ä¸ªå†…å­˜å—ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•æ¥è®¿é—®é‡Œé¢çš„å…ƒç´ ã€‚

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}
```

éæ³•çš„æ•°ç»„è®¿é—®ï¼š

```rust
use std::io;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println!("Please enter an array index.");

    let mut index = String::new();

    io::stdin()
        .read_line(&mut index)
        .expect("Failed to read line.");

    let index: usize = index
        .trim()
        .parse()
        .expect("Index entered was not a number");

    let element = a[index];

    println!("The value of the element at index {} is: {}", index, element);
}
```

è¾“å…¥å¤§äº 0 åˆ° 4 çš„æ•°å­—æ²¡é—®é¢˜ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´çš„è¯ï¼Œä¼šå› ä¸ºè¿è¡Œæ—¶é”™è¯¯è€Œ panicï¼š

```bash
thread 'main' panicked at 'index out of bounds: the len is 5 but the index is 9', src/main.rs:19:19
```

### 2.3 å‡½æ•°

Rust ä»£ç è§„èŒƒï¼Œå‡½æ•°å’Œå˜é‡åä½¿ç”¨ snake caseï¼Œæ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼š

```rust
fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("Another function.");
}
```

#### 2.3.1 å‚æ•°

ç¤ºä¾‹ï¼š

```rust
fn main() {
    another_function(5);
}

fn another_function(x: i32) {
    println!("The value of x is: {}", x);
}
```

åœ¨å‡½æ•°ç­¾åä¸­ï¼Œ**å¿…é¡»** å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹ã€‚

å½“å‡½æ•°æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œä½¿ç”¨é€—å·åˆ†éš”ï¼š

```rust
fn main() {
    another_function(5, 6);
}

fn another_function(x: i32, y: i32) {
    println!("The value of x is: {}, {}", x, y);
}
```

ä¸èƒ½åƒ Go ä¼¼åœ°çœç•¥é‡å¤çš„å‚æ•°ç±»å‹ã€‚

#### 2.3.2 åŒ…å«è¯­å¥å’Œè¡¨è¾¾å¼çš„å‡½æ•°ä½“

å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—çš„è¯­å¥å’Œä¸€ä¸ª**å¯é€‰çš„ç»“å°¾è¡¨è¾¾å¼**æ„æˆã€‚**è¯­å¥**ï¼ˆ*Statements*ï¼‰æ˜¯æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚è¡¨è¾¾å¼ï¼ˆ*Expressions*ï¼‰è®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼ã€‚

**è¯­å¥ä¸è¿”å›å€¼**ã€‚å› æ­¤ä¸èƒ½æŠŠ `let` è¯­å¥èµ‹å€¼ç»™å¦ä¸€ä¸ªå˜é‡ï¼š

```rust
fn main() {
    let x = (let y = 6);
}
```

è¿™ä¸€ç‚¹å’Œæœ‰äº›è¯­è¨€ä¸ä¸€æ ·ï¼Œæ¯”å¦‚ C è¯­è¨€å¯ä»¥è¿™ä¹ˆå†™ï¼š`x = y = 6`ï¼ŒRust ä¸­ä¸å¯ä»¥ã€‚

è¡¨è¾¾å¼ä¼šè®¡ç®—å‡ºä¸€äº›å€¼ï¼Œ**è¡¨è¾¾å¼çš„ç»“å°¾æ²¡æœ‰åˆ†å·**ã€‚å¦‚æœåœ¨è¡¨è¾¾å¼çš„ç»“å°¾åŠ ä¸Šåˆ†å·ï¼Œå®ƒå°±å˜æˆäº†è¯­å¥ï¼Œè€Œè¯­å¥ä¸ä¼šè¿”å›å€¼ã€‚

```rust
fn main() {
    let x = 5;

    let y = {
        let x = 3;
        x + 1 // æ³¨æ„è¿™é‡Œæ²¡æœ‰åˆ†å·
    };

    println!("The value of y is: {}", y);
}
```

#### 2.3.3 å…·æœ‰è¿”å›å€¼çš„å‡½æ•°

å‡½æ•°å¯ä»¥å‘è°ƒç”¨å®ƒçš„ä»£ç è¿”å›å€¼ã€‚å¹¶ä¸å¯¹è¿”å›å€¼å‘½åï¼Œä½†è¦åœ¨ç®­å¤´ï¼ˆ`->`ï¼‰åå£°æ˜å®ƒçš„ç±»å‹ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ç­‰åŒäº**å‡½æ•°ä½“æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼**ã€‚ä½¿ç”¨ `return` å…³é”®å­—å’ŒæŒ‡å®šå€¼ï¼Œå¯ä»å‡½æ•°ä¸­æå‰è¿”å›ï¼›ä½†å¤§éƒ¨åˆ†å‡½æ•°éšå¼çš„è¿”å›æœ€åçš„è¡¨è¾¾å¼ã€‚

```rust
fn main() {
    let x = five();

    println!("The value of x is: {}", x);
}

fn five() -> i32 {
    5
}
```

çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š

```rust
fn main() {
    let x = plus_one(5);

    println!("The value of x is: {}", x);
}

fn plus_one(x: i32) -> i32 {
    x + 1
}
```

å¦‚æœæŠŠä»£ç ä¿®æ”¹ä¸º `x + 1;`ï¼Œè¿è¡Œæ—¶ä¼šæŠ¥é”™ï¼š

```bash
error[E0308]: mismatched types
 --> src/main.rs:7:24
  |
7 | fn plus_one(x: i32) -> i32 {
  |    --------            ^^^ expected `i32`, found `()`
  |    |
  |    implicitly returns `()` as its body has no tail or `return` expression
8 |     x + 1;
  |          - help: consider removing this semicolon
```

å› ä¸ºå‡½æ•° `plus_one` çš„å®šä¹‰è¯´æ˜å®ƒè¦è¿”å›ä¸€ä¸ª `i32` ç±»å‹çš„å€¼ï¼Œä¸è¿‡è¯­å¥å¹¶ä¸ä¼šè¿”å›å€¼ï¼Œä½¿ç”¨ç©ºå…ƒç»„ `()` è¡¨ç¤ºä¸è¿”å›å€¼ã€‚å› ä¸ºä¸è¿”å›å€¼ä¸å‡½æ•°å®šä¹‰ç›¸çŸ›ç›¾ï¼Œå› æ­¤ä¼šæŠ¥é”™ã€‚

### 2.4 æ§åˆ¶æµ

Rust ä»£ç ä¸­æœ€å¸¸è§çš„ç”¨æ¥æ§åˆ¶æ‰§è¡Œæµçš„ç»“æ„æ˜¯ `if` è¡¨è¾¾å¼å’Œå¾ªç¯ã€‚

if è¡¨è¾¾å¼åé¢çš„æ¡ä»¶ **å¿…é¡»** æ˜¯ `bool` å€¼ã€‚

å¤ªå¤š `else if` è¡¨è¾¾å¼ä½¿å¾—ä»£ç å¯è¯»æ€§ä¸å¼ºï¼Œå½“å¤šäºä¸€ä¸ª `else if` è¯­å¥æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `match` åˆ†æ”¯ç»“æ„ã€‚

#### 2.4.1 åœ¨ let è¯­å¥ä¸­ä½¿ç”¨ if

å› ä¸º `if` æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥åœ¨ `let` è¯­å¥çš„å³ä¾§ä½¿ç”¨å®ƒï¼š

```rust
fn main() {
    let condition = true;
    let num = if condition { 5 } else { 6 };

    println!("The number is: {}", num);
}
```

ä¾‹å­ä¸­å°† `if` è¡¨è¾¾å¼çš„è¿”å›å€¼èµ‹ç»™ä¸€ä¸ªå˜é‡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ•´ä¸ª `if` è¡¨è¾¾å¼çš„å€¼å–å†³äºå“ªä¸ªä»£ç å—è¢«æ‰§è¡Œã€‚è¿™æ„å‘³ç€ `if` çš„æ¯ä¸ªåˆ†æ”¯çš„å¯èƒ½çš„è¿”å›å€¼éƒ½å¿…é¡»æ˜¯ç›¸åŒç±»å‹ï¼Œå› ä¸ºå˜é‡å¿…é¡»åªæœ‰ä¸€ä¸ªç±»å‹ã€‚

#### 2.4.2 å¾ªç¯

Rust æœ‰ä¸‰ç§å¾ªç¯ï¼š`loop`ã€`while` å’Œ `for`ã€‚

**loop**

`loop` å…³é”®å­—å‘Šè¯‰ Rust ä¸€éåˆä¸€éåœ°æ‰§è¡Œä¸€æ®µä»£ç ç›´åˆ°ä½ æ˜ç¡®è¦æ±‚åœæ­¢ã€‚å¯ä»¥ä½¿ç”¨ `break` å…³é”®å­—æ¥å‘Šè¯‰ç¨‹åºä½•æ—¶åœæ­¢å¾ªç¯ã€‚

`loop` çš„ä¸€ä¸ªç”¨ä¾‹æ˜¯é‡è¯•å¯èƒ½ä¼šå¤±è´¥çš„æ“ä½œã€‚å¦‚æœå°†è¿”å›å€¼åŠ å…¥ç”¨æ¥åœæ­¢å¾ªç¯çš„ `break` è¡¨è¾¾å¼ï¼Œå®ƒä¼šè¢«åœæ­¢çš„å¾ªç¯è¿”å›ã€‚

```rust
fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };

    println!("The result is: {}", result)
}
```

è¿™ä¸ªä¾‹å­é‡Œï¼Œloop è¢« break åï¼Œè¿”å›å€¼é€šè¿‡ let è¯­å¥èµ‹å€¼ç»™äº† resultã€‚

**while**

while ç”¨æ¥è¿›è¡Œæ¡ä»¶å¾ªç¯ã€‚è¿™ä¸ªéœ€æ±‚å½“ç„¶å¯ä»¥ç”¨ä¸Šé¢çš„ loop åŠ  ifã€elseã€break ç­‰å…³é”®å­—å®ç°ï¼ŒRust è¿˜æä¾›äº† while å…³é”®å­—ç”¨æ¥å®ç°æ¡ä»¶å¾ªç¯ã€‚

```rust
fn main() {
    let mut num = 3;

    while num != 0 {
        println!("number: {}", num);

        num -= 1;
    }

    println!("LIFTOFF!!!");
}
```

å¯ä»¥ä½¿ç”¨ `while` ç»“æ„æ¥éå†é›†åˆä¸­çš„å…ƒç´ ï¼š

```rust
fn main() {
    let arr = [1, 2, 3, 4, 5, 6];
    let mut index = 0;

    while index < 5 {
        println!("The value is: {}", arr[index]);

        index += 1;
    }
}
```

ä½†è¿™æ ·å†™å¯èƒ½ä¼šå› ä¸ºç´¢å¼•è¶Šç•Œè€Œ panicï¼Œå¯ä»¥ç”¨ for æ¥ä»£æ›¿ï¼š

```rust
fn main() {
    let arr = [1, 2, 3, 4, 5, 6];

    for ele in arr.iter() {
        println!("element is: {}", ele);
    }
}
```

è¿˜å¯ä»¥ä½¿ç”¨ rev æ–¹æ³•è¿›è¡Œåè½¬éå†ï¼š

```rust
fn main() {
    for num in (1..4).rev() {
        println!("{}", num);
    }

    println!("LIFTOFF!!!");
}
```

